import{r as a,a as k,u as A,H as N,j as u,b as t,I as d,B as C,J as H}from"./index-864a135d.js";import{A as b}from"./AdminMenu-89a6688f.js";function L(){const[s,l]=a.useState(""),[i,p]=a.useState(""),[r,g]=a.useState(""),[V,c]=a.useState(!1),m=a.useRef(null),[v,S]=a.useState(!1),o=new FormData,n=k(e=>e.commonSettings),f=A();a.useEffect(()=>{f(N())},[]),a.useEffect(()=>{n.commonSettings&&(l(n.commonSettings.vklink),p(n.commonSettings.tglink),g(n.commonSettings.donationlink))},[n.commonSettings]);const D=()=>{if(n.commonSettings.vklink==s&&n.commonSettings.tglink==i&&n.commonSettings.donationlink==r)return alert("Заполните все поля");m.current!=null&&o.append("img",m.current),o.append("vklink",s),o.append("tglink",i),o.append("donation",r),f(H(o))},h=e=>{e.preventDefault(),c(!0)},_=e=>{e.preventDefault(),c(!1)},x=e=>{e.preventDefault(),m.current=[...e.dataTransfer.files][0],S(!0),c(!1)};return u("div",{className:"ac",children:[t("h1",{className:"admin__title",children:"Общие Настройки"}),u("div",{className:"admin__content ac__content",children:[t(d,{lable:"Ссылка на ВКонтакте",placeholder:"https://donation-alerts/329429",value:s,setValue:l,type:"text"}),t(d,{lable:"Ссылка на Telegram",placeholder:"https://donation-alerts/329429",value:i,setValue:p,type:"text"}),t(d,{lable:"Ссылка на Donationalerts",placeholder:"https://donation-alerts/329429",value:r,setValue:g,type:"text"}),t("div",{className:"ac__upload-area",onDragStart:e=>h(e),onDragLeave:e=>_(e),onDragOver:e=>h(e),onDrop:e=>x(e),children:v?t("h1",{className:"ac__upload-text",children:"Файл загружен"}):t("h1",{className:"ac__upload-text",children:"Перетащите файл"})})]}),t(C,{onClick:D,children:"Сохранить изменения"})]})}function E(){const s=k(l=>l.auth);return!s.userInfo&&s.loading?t("h1",{children:"Loading"}):s.isAdmin?u("div",{className:"admin",children:[t("div",{className:"admin__main-area",children:t(L,{})}),t(b,{})]}):t("h1",{children:"Вы не админ, доступ запрещён"})}export{E as default};
