import{i as w,b as t,u as k,a as A,r as a,n as H,j as h,g as I,F as i,A as N,I as m,B as R,K as T}from"./index-864a135d.js";function j(){const{postid:r}=w();if(!r)return t("h1",{children:"PostId не указан"});const d=k(),s=A(e=>e.posts),n=new FormData,[D,o]=a.useState(!1),l=a.useRef(null),[S,_]=a.useState(!1),[p,u]=a.useState(""),[c,f]=a.useState(""),[g,x]=a.useState("");a.useEffect(()=>{d(H())},[]),a.useEffect(()=>{s.posts&&s.posts[r]&&(u(s.posts[r].title),f(s.posts[r].content),x(s.posts[r].preview))},[s.posts]);const v=e=>{e.preventDefault(),o(!0)},P=e=>{e.preventDefault(),o(!1)},b=e=>{e.preventDefault(),l.current=[...e.dataTransfer.files][0],_(!0),o(!1)},E=()=>{if(l.current==null||!p||!c)return alert("Ничего не изменнено");n.append("title",p),n.append("img",l.current),n.append("content",c),n.append("postid",s.posts[r].id),d(T({data:n}))};return h("div",{className:"ape",children:[t("div",{onDragStart:e=>v(e),onDragLeave:e=>P(e),onDragOver:e=>v(e),onDrop:e=>b(e),className:D?"ape__uploadarea ape__uploadarea_active":"ape__uploadarea",style:g?{background:`url('${I.SERVER_HOST+"/"+g}')`,backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{},children:S?t(i,{children:t("h1",{className:"ape__load-text",children:"Фото загружено для обновления"})}):h(i,{children:[t(N,{}),t("p",{className:"ape__text",children:"Перетащите картинку сюда или загрузите"})]})}),t(m,{lable:"Введите название поста",placeholder:"Введите название",type:"text",value:p,setValue:u}),t(m,{lable:"Введите текст поста",placeholder:"Введите текст",type:"text",value:c,setValue:f,textarea:!0}),t(R,{onClick:E,children:"Изменить пост"})]})}function F(){return t(i,{children:t(j,{})})}export{F as default};
